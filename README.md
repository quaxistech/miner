
# Stratum V1 Client (C++20)

Этот проект реализует клиент Stratum V1 на C++20, который подключается к локальному майнинг-пулу (порт 3333), получает задания и объясняет структуру полученных данных.

## Требования

*   C++ компилятор с поддержкой C++20 (GCC 10+, Clang 10+)
*   CMake 3.14+
*   Библиотека Boost (Asio) (`libboost-all-dev` на Ubuntu)

## Сборка

```bash
mkdir build
cd build
cmake ..
make
```

## Запуск

```bash
./stratum_client [HOST] [PORT]
```

По умолчанию подключается к `127.0.0.1:3333`.

## Описание работы

Программа выполняет следующие действия:
1.  Подключается к указанному хосту и порту через TCP.
2.  Отправляет запрос `mining.subscribe`.
3.  Разбирает ответ и объясняет параметры (Session ID, ExtraNonce1, ExtraNonce2_size).
4.  Отправляет фиктивную авторизацию `mining.authorize`.
5.  Ожидает и разбирает сообщения `mining.notify`, детально описывая поля:
    *   **Job ID**: Идентификатор задания.
    *   **PrevHash**: Хэш предыдущего блока.
    *   **Coinb1/Coinb2**: Части coinbase-транзакции.
    *   **Merkle Branch**: Ветвь дерева Меркла.
    *   **Version**, **nBits**, **nTime**: Заголовок блока.
    *   **Clean Jobs**: Флаг очистки очереди заданий.

## Структура проекта

*   `main.cpp`: Основной код клиента.
*   `CMakeLists.txt`: Файл сборки.
*   `json.hpp`: Библиотека для работы с JSON.


## Отладка PoW-расчетов

Текущая версия клиента выводит максимально подробную трассировку SHA256d:
- подготовка и паддинг блоков SHA-256,
- расписание сообщений `W[0..63]`,
- значения регистров `a..h` и `T1/T2` на каждом раунде,
- финальные сравнения `hash` и `target` в формате `hash=... VS target=...`.

Это упрощает разбор конфликтов/расхождений при валидации шары относительно target.
